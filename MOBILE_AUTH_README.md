# Мобильные страницы авторизации

## Описание
Реализованы мобильные версии страниц авторизации по телефону и коду из Figma.

## Созданные компоненты

### Мобильные UI компоненты (src/mobile-components/)
1. **MobileInput** - Инпут для мобильных устройств с поддержкой маски
2. **MobileButton** - Кнопка для мобильных устройств
3. **MobileCodeInput** - Специализированный компонент для ввода кода
4. **MobileErrorMessage** - Компонент для отображения ошибок

### Мобильные страницы
1. **MobileAuthPhonePage** (`src/pages/AuthPhonePage/MobileAuthPhonePage.tsx`)
   - Поле ввода номера телефона с маской +7 (XXX) XXX-XX-XX
   - Валидация формата номера (10 цифр)
   - Кнопка "Получить код"
   - Обработка ошибок
   - Интеграция с AuthStore

2. **MobileAuthCodePage** (`src/pages/AuthCodePage/MobileAuthCodePage.tsx`)
   - Поле ввода кода (4 цифры)
   - Таймер повторной отправки (60 секунд)
   - Кнопка "Подтвердить"
   - Ссылка "Отправить код повторно"
   - Обработка ошибок
   - Интеграция с AuthStore

## Роутинг
Используется компонент `PlatformRoute` для автоматического выбора desktop или mobile версии:
- Desktop: `AuthPhonePage`, `AuthCodePage`
- Mobile: `MobileAuthPhonePage`, `MobileAuthCodePage`

Определение платформы основано на:
1. URL параметре `?platform=mobile|desktop`
2. User Agent
3. Ширине экрана (breakpoint: 768px)

## Тестирование

### Мобильная версия
Откройте в браузере с параметром platform:
```
http://localhost:3000/auth/phone?platform=mobile
```

Или просто уменьшите ширину окна браузера до < 768px.

### Desktop версия
Откройте без параметра platform или с `?platform=desktop`:
```
http://localhost:3000/auth/phone
```

### Тестовые сценарии

#### 1. Страница ввода телефона (MobileAuthPhonePage)
- [ ] Автофокус на поле ввода телефона
- [ ] Маска работает корректно: +7 (___) ___-__-__
- [ ] Валидация срабатывает при вводе неполного номера
- [ ] Кнопка "Получить код" активна только при корректном номере (10 цифр)
- [ ] При нажатии кнопки отправляется запрос и происходит переход на страницу ввода кода
- [ ] Отображается лоадер во время отправки запроса
- [ ] Ошибки отображаются корректно

#### 2. Страница ввода кода (MobileAuthCodePage)
- [ ] Отображается номер телефона, на который был отправлен код
- [ ] Автофокус на первое поле ввода кода
- [ ] Автопереход между полями при вводе цифр
- [ ] Вставка кода из буфера обмена работает корректно
- [ ] Таймер обратного отсчета работает (60 секунд)
- [ ] Кнопка "Отправить повторно" становится активной после истечения таймера
- [ ] При вводе последней цифры автоматически отправляется запрос на верификацию
- [ ] Кнопка "Подтвердить" работает корректно
- [ ] При ошибке код очищается
- [ ] После успешной авторизации происходит редирект на Dashboard

#### 3. Общие проверки
- [ ] Страницы адаптивны для разных размеров экрана
- [ ] Безопасные отступы работают на устройствах с notch (iPhone X и новее)
- [ ] Минимальные размеры touch-target соблюдены (44px)
- [ ] Переиспользуется логика из AuthStore
- [ ] CSS переменные из variables.css используются корректно
- [ ] Нет ошибок в консоли браузера

## Технические детали

### CSS переменные
Используются мобильные CSS переменные:
- `--spacing-mobile-*` для отступов
- `--font-size-mobile-*` для размеров шрифтов
- `--border-radius-mobile-*` для скруглений
- `--mobile-button-height`, `--mobile-input-height` для высоты элементов
- `--mobile-touch-target-min` для минимального размера touch-target (44px)

### Safe Area Insets
Поддержка безопасных зон для notched устройств:
```css
@supports (padding: max(0px)) {
  padding-top: max(var(--spacing-mobile-2xl), env(safe-area-inset-top));
}
```

### iOS оптимизация
- `-webkit-appearance: none` для сброса стилей iOS
- `-webkit-tap-highlight-color: transparent` для отключения подсветки при тапе
- `100dvh` для корректной высоты на мобильных браузерах

## Критерии готовности
- ✅ Страницы соответствуют требованиям из задачи
- ✅ Работает ввод телефона с маской
- ✅ Работает ввод кода
- ✅ Корректная обработка ошибок
- ✅ Переиспользуется логика из AuthStore
- ✅ CSS файлы созданы для всех компонентов
- ✅ Адаптивная верстка для мобильных устройств
- ✅ Роутинг настроен с PlatformRoute
- ✅ Сборка проходит без ошибок
